/*!
 * JK GIF Player v1.0.2
 * by Jean KÃ¡ssio
 *
 * More info:
 * https://jeankassio.dev
 *
 * Copyright JK Desenvolvimento WEB <contato@jeankassio.dev>
 * Released under the MIT license
 * https://github.com/jeankassio/JK-GIF-Player-jQuery/blob/main/LICENSE
 *
 * @preserve
 */
(t=>{t.fn.JKGifPlayer=function(a={}){const i=new Map,e=Object.assign({},{autoplay:!1,data:"gif",autopause:!1,loops:5},a),n=a=>{let i=t(a).attr("id");return i||(i=s(a)),i},s=a=>{const i=`jk_${Math.random().toString(36).substr(2,9)}`;return t(a).attr("id",i),i},r=(t,a,s,r,o)=>{if(r){if(a.data("gif",s),a.attr("src",r),a.data("thumb",""),t.removeClass("play_gif"),t.trigger("stop.JK_Gif"),e.autopause){const a=n(t);clearTimeout(i.get(a)),i.delete(a)}}else a.data("thumb",s),a.attr("src",o),a.data("gif",""),t.addClass("play_gif"),t.trigger("play.JK_Gif"),e.autopause&&d(t,o,s)},d=(a,s,r,d=!1)=>{const o=n(a),f=t(a).find("img").eq(0),c=parseFloat(f.data("seconds"))||0,h=d?0:c*e.loops*1e3,g=setTimeout((()=>{const i=t(a),e=i.find("img").eq(0);e.data("gif",e.attr("src")),e.attr("src",e.data("thumb")),e.data("thumb",""),i.removeClass("play_gif"),i.trigger("stop.JK_Gif")}),h);i.set(o,g)},o=(a,i)=>new Promise((e=>{fetch(i).then((t=>t.arrayBuffer())).then((t=>n(new Uint8Array(t)))).then((([i,n])=>{t(a).data({seconds:i,miliseconds:n}),e([i,n])}));const n=t=>{let a=0;for(let i=0;i<t.length;i++)if(33===t[i]&&249===t[i+1]&&4===t[i+2]&&0===t[i+7]){const e=t[i+5]<<8|255&t[i+4];a+=e<2?10:e}return[a/100,10*a]}})),f=async a=>{await(async a=>{const i=t(a).find("img").eq(0),e=new Image;e.crossOrigin="anonymous",e.src=i.data("gif"),await e.decode();const n=document.createElement("canvas");n.width=e.naturalWidth,n.height=e.naturalHeight,n.getContext("2d").drawImage(e,0,0),await o(i,e.src),i.data({width:n.width,height:n.height}),i.attr("src",n.toDataURL())})(a),e.autoplay&&t(a).each((function(){const a=t(this),i=a.find("img").eq(0),e=i.attr("src"),n=i.data("thumb"),s=i.data("gif");r(a,i,e,n,s)}))},c=a=>{const i=t(a),n=i.data(e.data);i.empty().addClass("jk_gif").append(t("<img/>").data("gif",n).attr("src","")),f(a),i.on("click",(function(){const a=t(this),i=a.find("img").eq(0),e=i.attr("src"),n=i.data("thumb"),s=i.data("gif");r(a,i,e,n,s)}))};return t.fn.PlayStop_Gif=function(){return this.each((function(){const a=t(this),i=a.find("img").eq(0),e=i.attr("src"),n=i.data("thumb"),s=i.data("gif");r(a,i,e,n,s)}))},t.fn.GetSize_Gif=function(){const a=t(this).find("img").eq(0);return{width:a.data("width"),height:a.data("height")}},t.fn.GetHeight_Gif=function(){return t(this).find("img").eq(0).data("height")},t.fn.GetWidth_Gif=function(){return t(this).find("img").eq(0).data("width")},t.fn.GetDuration_Gif=function(){return t(this).find("img").eq(0).data("seconds")},t.fn.GetDurationMili_Gif=function(){return t(this).find("img").eq(0).data("miliseconds")},this.each((function(){c(this)}))}})(jQuery);